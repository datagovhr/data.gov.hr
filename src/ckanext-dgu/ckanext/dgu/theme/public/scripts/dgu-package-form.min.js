$(function(){assert(window.form_errors,"window.form_errors not set");var a=$("body.PackageController.new").length>0,b=[];for(field_id in window.form_errors){var c=window.form_errors[field_id];if(!c.length)return;if("object"==typeof c[0]){found=!1;for(var d=0;d<c.length&&!found;d++)for(key in c[d]){field_id=field_id+"__"+d+"__"+key,found=!0;break}}var e=$("#"+field_id);if(void 0!==e&&e.length>0){var f=e.parents("fieldset").last().attr("id");b.push(f),f=f.replace(/-fields?$/,""),$("#"+f).addClass("fieldset_button_error")}}b.length>0&&(window.location.hash="tab-"+b[0]),a&&(new CKAN.Dgu.UrlEditor({slugType:"package"}),$("#title").focus()),$('.package_create_form a[data-toggle="tab"]').on("click",function(a){var b=$(a.delegateTarget);return b.hasClass("disabled")?(a.preventDefault(),!1):void 0}),$('.package_create_form a[data-toggle="tab"]').on("click",function(a){var b=$(a.target),c=b.parent(),d=c.prev().length>0,e=c.next().length>0;d?$("#back-button").removeAttr("disabled"):$("#back-button").attr("disabled","disabled"),e?$("#next-button").removeAttr("disabled"):$("#next-button").attr("disabled","disabled")}),CKAN.Dgu.showHideResourceFieldsets(),CKAN.Dgu.copyTableRowOnClick($("#additional_resources-add"),$("#additional_resources-table")),CKAN.Dgu.copyTableRowOnClick($("#timeseries_resources-add"),$("#timeseries_resources-table")),CKAN.Dgu.copyTableRowOnClick($("#individual_resources-add"),$("#individual_resources-table")),$("a.disabled").click(function(a){a.preventDefault()}),$("#back-button").click(function(a){a.preventDefault();var b=$("div#form-tabs li.active");b.prev().children("a").click()}),$("#next-button").click(function(a){a.preventDefault();var b=$("div#form-tabs li.active").next().children("a");b.hasClass("disabled")&&(b.removeAttr("disabled"),b.removeClass("disabled")),b.click()}),CKAN.Dgu.setupTagAutocomplete($("input.autocomplete-tag"));var g=["contact-name","contact-email","contact-phone","foi-name","foi-email","foi-web","foi-phone"];$("#groups__0__name").change(function(){var a=$(this).val(),b=publishers[a];if(void 0===b){b={};for(var c=0;c<g.length;c++)b[g[c]]=""}for(var c=0;c<g.length;c++)$("#"+g[c]).val(b[g[c]]),$("#"+g[c]+"-dialog").val(b[g[c]]),$("#"+g[c]+"-label").text(b[g[c]])}),CKAN.Dgu.setupEditorDialogs(),$("#license_id").change(function(){var a=$(this).val();console.log('LICENSE "'+a+'"'),""==a||"__extra__"==a?$(".choose-other-licence").show():($("#access_constraints").val(""),$(".choose-other-licence").hide())}),$("#license_id").change(),CKAN.Dgu.setupResourcesToggle(),$(".validate-resources-button").each(function(a,b){CKAN.Dgu.validateResource(b,function(){return $(b).parent().find("tr.resource")})}),$(".validate-resource-button").each(function(a,b){CKAN.Dgu.validateResource(b,function(){return $(b).parents("tr.resource")})}),$(".resource-move").each(function(a,b){b=$(b),CKAN.Dgu.bindResourceMoveButtons(b,function(){return b.parents("tr.resource")})});var h=$(".resource-move").parents("table");$.each(h,function(a,b){CKAN.Dgu.setVisibleResourceMoveButtons($(b))}),$(".format-typeahead").autocomplete({source:DGU_RESOURCE_FORMATS,items:5}),CKAN.Dgu.setupAdditionalResourcesScrapers(),$(".needs-datepicker").datepicker({dateFormat:"dd/mm/yy"})});
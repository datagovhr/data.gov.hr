$(function(){function a(b){var c=[];return b.find("> .publisher").each(function(b,d){d=$(d);var e=d.find("> .publisher-row > a:first");c.push({div:d,link:e,rawtext:e.text(),searchtext:e.text().toLowerCase(),children:a(d)})}),c}function b(a){if(a=a.toLowerCase(),0==a.length||"start typing a name..."==a){var b=$(".publisher");return j=b.length,b.removeClass("match"),b.removeClass("childMatch"),e.addClass("empty-search"),g.text(j),h.text("Izdava" + String.fromCharCode(269) + "a"),void 0}e.removeClass("empty-search"),j=0;for(var d=0;d<i.length;d++)c(a,i[d]);g.text(j),h.text("Results")}function c(a,b){for(var d=!1,e=0;e<b.children.length;e++)d|=c(a,b.children[e]);var f=b.searchtext.indexOf(a);if(-1!=f){j+=1;var g=b.rawtext.substring(0,f),h=b.rawtext.substring(f,f+a.length),i=b.rawtext.substring(f+a.length);return b.div.addClass("match"),b.link.html(g+'<span class="highlight">'+h+"</span>"+i),!0}return b.div.removeClass("match"),b.link.html(b.rawtext),d?b.div.addClass("childmatch"):b.div.removeClass("childmatch"),d}function d(){var a=f.val();a!=k&&(k=a,f.addClass("loading"),window.clearTimeout(window.dgu_pub_timeout),window.dgu_pub_timeout=window.setTimeout(function(){f.removeClass("loading"),b(a)},200))}var e=$(".publisher-hierarchy"),f=$("input#js-search"),g=$(".result-count"),h=$(".result-count-footer"),i=a(e);assert(e.length),assert(f.length);var j=-1,k="";f.on("keydown",d),f.on("keyup",d),f.on("keypress",d),f.change(d),b(f.val()),$('input[name="q"]').focus(),$(".js-expand,.js-collapse").click(function(a){a.preventDefault();var b=$(a.delegateTarget),c=b.hasClass("js-expand");return b.parent().toggleClass("expanded",c).toggleClass("collapsed",!c),!1})});